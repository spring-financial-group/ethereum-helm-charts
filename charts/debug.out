NAME: geth-node
LAST DEPLOYED: Thu Apr  3 11:18:39 2025
NAMESPACE: jx-staging
STATUS: pending-install
REVISION: 1
USER-SUPPLIED VALUES:
{}

COMPUTED VALUES:
PVCConfigs:
  genesis:
    enabled: false
    pvcName: genesis-data-pvc
    storageClassName: azurefile
affinity: {}
annotations: {}
authPort: 8551
config: |
  [Node.P2P]
  DialRatio = 3
containerSecurityContext: {}
customCommand: []
defaultCommandTemplate: |
  - sh
  - -ac
  - >
  {{- if .Values.p2pNodePort.enabled }}
    . /env/init-nodeport;
  {{- end }}
    exec geth
    --datadir=/data/geth/$HOSTNAME
    --authrpc.jwtsecret=/data/jwt.hex
    --http
    --http.addr=0.0.0.0
    --http.api=admin,debug,engine,eth,miner,net,rpc,txpool,web3
    --http.corsdomain=*
    --http.port=8545
    --http.vhosts=*
    --ws
    --ws.api=admin,debug,engine,eth,miner,net,rpc,txpool,web3
    --ws.addr=0.0.0.0
    --ws.port=8546
    --ws.origins=*
    --authrpc.vhosts=*
    --authrpc.addr=0.0.0.0
    --authrpc.port=8551
    --allow-insecure-unlock
    --unlock=0x123463a4b065722e99115d6c222f267d9cabb524
    --password=/data/geth/geth_password.txt
    --nodiscover
    --syncmode=full
    --metrics
    --metrics.addr=geth
    --metrics.port=6060
    --metrics.expensive
  {{- range .Values.extraArgs }}
    {{ tpl . $ }}
  {{- end }}
extraArgs:
- --networkid=999999
- --verbosity=3
- --ipcpath=/tmp/geth.ipc
extraContainerPorts: []
extraContainers:
- command:
  - /bin/sh
  - -c
  - while true; do sleep 30; done
  image: jx3mqubebuild.azurecr.io/mqube-geth:v0.0.13
  name: debug-node
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 100m
      memory: 128Mi
extraEnv: []
extraPorts: []
extraVolumeMounts: []
extraVolumes: []
fullnameOverride: ""
gethconfig:
  enabled: true
httpPort: 8545
image:
  pullPolicy: IfNotPresent
  repository: docker.io/ethereum/client-go
  tag: v1.14.11
imagePullSecrets: []
ingress:
  annotations: {}
  enabled: false
  hosts:
  - host: chart-example.local
    paths: []
  tls: []
initChownData:
  command:
  - sh
  - -c
  - |
    cp /config/init-script.sh /tmp/init-script.sh
    chmod +x /tmp/init-script.sh
    /tmp/init-script.sh
  enabled: true
  freshInit: true
  image:
    pullPolicy: IfNotPresent
    repository: jx3mqubebuild.azurecr.io/mqube-geth
    tag: 0.0.9
  resources: {}
initContainers: []
jwt: ecb22bc24e7d4061f7ed690ccd5846d7d73f5d2b9733267e12f56790398d908a
livenessProbe:
  initialDelaySeconds: 60
  periodSeconds: 120
  tcpSocket:
    port: http-rpc
metricsPort: 6060
nameOverride: ""
nodeSelector: {}
p2pNodePort:
  enabled: false
  initContainer:
    image:
      pullPolicy: IfNotPresent
      repository: lachlanevenson/k8s-kubectl
      tag: v1.25.4
  port: 31000
  portForwardContainer:
    image:
      pullPolicy: IfNotPresent
      repository: alpine/socat
      tag: latest
p2pPort: 30303
p2pUdpPort: 30303
persistence:
  accessModes:
  - ReadWriteMany
  annotations: {}
  enabled: true
  existingClaim: null
  selector: {}
  size: 20Gi
  storageClassName: azurefile
podAnnotations: {}
podDisruptionBudget: {}
podLabels: {}
podManagementPolicy: OrderedReady
priorityClassName: null
rbac:
  clusterRules:
  - apiGroups:
    - ""
    resources:
    - nodes
    verbs:
    - get
    - list
    - watch
  create: true
  rules:
  - apiGroups:
    - ""
    resources:
    - services
    verbs:
    - get
    - list
    - watch
readinessProbe:
  initialDelaySeconds: 10
  periodSeconds: 10
  tcpSocket:
    port: http-rpc
replicas: 1
resources: {}
secretEnv: {}
securityContext:
  fsGroup: 10001
  runAsGroup: 10001
  runAsNonRoot: true
  runAsUser: 10001
serviceAccount:
  annotations: {}
  create: true
  name: ""
serviceMonitor:
  annotations: {}
  enabled: false
  interval: 1m
  labels: {}
  namespace: null
  path: /debug/metrics/prometheus
  relabelings: []
  scheme: http
  scrapeTimeout: 30s
  tlsConfig: {}
terminationGracePeriodSeconds: 300
tolerations: []
topologySpreadConstraints: []
updateStrategy:
  type: RollingUpdate
wsPort: 8546

HOOKS:
---
# Source: geth/templates/tests/test-connection.yaml
apiVersion: v1
kind: Pod
metadata:
  name: "geth-node-test-connection"
  labels:
    helm.sh/chart: geth-1.0.8
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: curl
      image: curlimages/curl
      command: ['curl']
      args:
        - --location
        - --request
        - POST
        - 'geth-node:8545/'
        - --header
        - 'Content-Type: application/json'
        - --data-raw
        - '{"jsonrpc":"2.0","method":"web3_clientVersion","params":[],"id":67}'
  restartPolicy: Never
MANIFEST:
---
# Source: geth/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: geth-node
  labels:
    helm.sh/chart: geth-1.0.8
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
    app.kubernetes.io/managed-by: Helm
  namespace: jx-staging
---
# Source: geth/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: geth-node-env
  labels:
    helm.sh/chart: geth-1.0.8
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
    app.kubernetes.io/managed-by: Helm
data:
---
# Source: geth/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: geth-node-jwt
type: Opaque
data:
  jwt.hex: ZWNiMjJiYzI0ZTdkNDA2MWY3ZWQ2OTBjY2Q1ODQ2ZDdkNzNmNWQyYjk3MzMyNjdlMTJmNTY3OTAzOThkOTA4YQ==
---
# Source: geth/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: geth-node
data:
  geth.toml: |
    [Node.P2P]
    DialRatio = 3
    
  config.yml: |
    CONFIG_NAME: interop
    PRESET_BASE: interop
    
    # Genesis
    GENESIS_FORK_VERSION: 0x20000089
    
    # Altair
    ALTAIR_FORK_EPOCH: 0
    ALTAIR_FORK_VERSION: 0x20000090
    
    # Merge
    BELLATRIX_FORK_EPOCH: 0
    BELLATRIX_FORK_VERSION: 0x20000091
    TERMINAL_TOTAL_DIFFICULTY: 0
    
    # Capella
    CAPELLA_FORK_EPOCH: 0
    CAPELLA_FORK_VERSION: 0x20000092
    MAX_WITHDRAWALS_PER_PAYLOAD: 16
    
    # DENEB
    DENEB_FORK_EPOCH: 0
    DENEB_FORK_VERSION: 0x20000093
    
    # Electra
    # ELECTRA_FORK_EPOCH: 0
    ELECTRA_FORK_VERSION: 0x15000000
    
    # Time parameters
    SECONDS_PER_SLOT: 12
    SLOTS_PER_EPOCH: 6
    
    # Deposit contract
    DEPOSIT_CONTRACT_ADDRESS: 0x4242424242424242424242424242424242424242
  genesis.json: |
    {
    	"config": {
    		"chainId": 32382,
    		"homesteadBlock": 0,
    		"daoForkSupport": true,
    		"eip150Block": 0,
    		"eip155Block": 0,
    		"eip158Block": 0,
    		"byzantiumBlock": 0,
    		"constantinopleBlock": 0,
    		"petersburgBlock": 0,
    		"istanbulBlock": 0,
    		"muirGlacierBlock": 0,
    		"berlinBlock": 0,
    		"londonBlock": 0,
    		"arrowGlacierBlock": 0,
    		"grayGlacierBlock": 0,
    		"shanghaiTime": 1742892705,
    		"cancunTime": 1742892705,
    		"terminalTotalDifficulty": 0,
    		"terminalTotalDifficultyPassed": true
    	},
    	"nonce": "0x0",
    	"timestamp": "0x67e26ea1",
    	"extraData": "0x0000000000000000000000000000000000000000000000000000000000000000123463a4b065722e99115d6c222f267d9cabb5240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    	"gasLimit": "0x1c9c380",
    	"difficulty": "0x1",
    	"mixHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
    	"coinbase": "0x0000000000000000000000000000000000000000",
    	"alloc": {
    		"123463a4b065722e99115d6c222f267d9cabb524": {
    			"balance": "0x2863c1f5cdae42f9540000000"
    		},
    		"14dc79964da2c08b23698b3d3cc7ca32193d9955": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"15d34aaf54267db7d7c367839aaf71a00a2c6a65": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"1cbd3b2770909d4e10f157cabc84c7264073c9ec": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"23618e81e3f5cdf7f54c3d65f7fbc0abf5b21e8f": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"2546bcd3c84621e976d8185a91a922ae77ecec30": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"3c44cdddb6a900fa2b585dd299e03d12fa4293bc": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"4242424242424242424242424242424242424242": {
    			"code": "0x60806040526004361061003f5760003560e01c806301ffc9a71461004457806322895118146100b6578063621fd130146101e3578063c5f2892f14610273575b600080fd5b34801561005057600080fd5b5061009c6004803603602081101561006757600080fd5b8101908080357bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916906020019092919050505061029e565b604051808215151515815260200191505060405180910390f35b6101e1600480360360808110156100cc57600080fd5b81019080803590602001906401000000008111156100e957600080fd5b8201836020820111156100fb57600080fd5b8035906020019184600183028401116401000000008311171561011d57600080fd5b90919293919293908035906020019064010000000081111561013e57600080fd5b82018360208201111561015057600080fd5b8035906020019184600183028401116401000000008311171561017257600080fd5b90919293919293908035906020019064010000000081111561019357600080fd5b8201836020820111156101a557600080fd5b803590602001918460018302840111640100000000831117156101c757600080fd5b909192939192939080359060200190929190505050610370565b005b3480156101ef57600080fd5b506101f8610fd0565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561023857808201518184015260208101905061021d565b50505050905090810190601f1680156102655780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561027f57600080fd5b50610288610fe2565b6040518082815260200191505060405180910390f35b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061036957507f85640907000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b9050919050565b603087879050146103cc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260268152602001806116ec6026913960400191505060405180910390fd5b60208585905014610428576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260368152602001806116836036913960400191505060405180910390fd5b60608383905014610484576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602981526020018061175f6029913960400191505060405180910390fd5b670de0b6b3a76400003410156104e5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260268152602001806117396026913960400191505060405180910390fd5b6000633b9aca0034816104f457fe5b061461054b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260338152602001806116b96033913960400191505060405180910390fd5b6000633b9aca00348161055a57fe5b04905067ffffffffffffffff80168111156105c0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260278152602001806117126027913960400191505060405180910390fd5b60606105cb82611314565b90507f649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c589898989858a8a610600602054611314565b60405180806020018060200180602001806020018060200186810386528e8e82818152602001925080828437600081840152601f19601f82011690508083019250505086810385528c8c82818152602001925080828437600081840152601f19601f82011690508083019250505086810384528a818151815260200191508051906020019080838360005b838110156106a657808201518184015260208101905061068b565b50505050905090810190601f1680156106d35780820380516001836020036101000a031916815260200191505b508681038352898982818152602001925080828437600081840152601f19601f820116905080830192505050868103825287818151815260200191508051906020019080838360005b8381101561073757808201518184015260208101905061071c565b50505050905090810190601f1680156107645780820380516001836020036101000a031916815260200191505b509d505050505050505050505050505060405180910390a1600060028a8a600060801b6040516020018084848082843780830192505050826fffffffffffffffffffffffffffffffff19166fffffffffffffffffffffffffffffffff1916815260100193505050506040516020818303038152906040526040518082805190602001908083835b6020831061080e57805182526020820191506020810190506020830392506107eb565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa158015610850573d6000803e3d6000fd5b5050506040513d602081101561086557600080fd5b8101908080519060200190929190505050905060006002808888600090604092610891939291906115da565b6040516020018083838082843780830192505050925050506040516020818303038152906040526040518082805190602001908083835b602083106108eb57805182526020820191506020810190506020830392506108c8565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa15801561092d573d6000803e3d6000fd5b5050506040513d602081101561094257600080fd5b8101908080519060200190929190505050600289896040908092610968939291906115da565b6000801b604051602001808484808284378083019250505082815260200193505050506040516020818303038152906040526040518082805190602001908083835b602083106109cd57805182526020820191506020810190506020830392506109aa565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa158015610a0f573d6000803e3d6000fd5b5050506040513d6020811015610a2457600080fd5b810190808051906020019092919050505060405160200180838152602001828152602001925050506040516020818303038152906040526040518082805190602001908083835b60208310610a8e5780518252602082019150602081019050602083039250610a6b565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa158015610ad0573d6000803e3d6000fd5b5050506040513d6020811015610ae557600080fd5b810190808051906020019092919050505090506000600280848c8c604051602001808481526020018383808284378083019250505093505050506040516020818303038152906040526040518082805190602001908083835b60208310610b615780518252602082019150602081019050602083039250610b3e565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa158015610ba3573d6000803e3d6000fd5b5050506040513d6020811015610bb857600080fd5b8101908080519060200190929190505050600286600060401b866040516020018084805190602001908083835b60208310610c085780518252602082019150602081019050602083039250610be5565b6001836020036101000a0380198251168184511680821785525050505050509050018367ffffffffffffffff191667ffffffffffffffff1916815260180182815260200193505050506040516020818303038152906040526040518082805190602001908083835b60208310610c935780518252602082019150602081019050602083039250610c70565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa158015610cd5573d6000803e3d6000fd5b5050506040513d6020811015610cea57600080fd5b810190808051906020019092919050505060405160200180838152602001828152602001925050506040516020818303038152906040526040518082805190602001908083835b60208310610d545780518252602082019150602081019050602083039250610d31565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa158015610d96573d6000803e3d6000fd5b5050506040513d6020811015610dab57600080fd5b81019080805190602001909291905050509050858114610e16576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252605481526020018061162f6054913960600191505060405180910390fd5b6001602060020a0360205410610e77576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602181526020018061160e6021913960400191505060405180910390fd5b60016020600082825401925050819055506000602054905060008090505b6020811015610fb75760018083161415610ec8578260008260208110610eb757fe5b018190555050505050505050610fc7565b600260008260208110610ed757fe5b01548460405160200180838152602001828152602001925050506040516020818303038152906040526040518082805190602001908083835b60208310610f335780518252602082019150602081019050602083039250610f10565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa158015610f75573d6000803e3d6000fd5b5050506040513d6020811015610f8a57600080fd5b8101908080519060200190929190505050925060028281610fa757fe5b0491508080600101915050610e95565b506000610fc057fe5b5050505050505b50505050505050565b6060610fdd602054611314565b905090565b6000806000602054905060008090505b60208110156111d057600180831614156110e05760026000826020811061101557fe5b01548460405160200180838152602001828152602001925050506040516020818303038152906040526040518082805190602001908083835b60208310611071578051825260208201915060208101905060208303925061104e565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa1580156110b3573d6000803e3d6000fd5b5050506040513d60208110156110c857600080fd5b810190808051906020019092919050505092506111b6565b600283602183602081106110f057fe5b015460405160200180838152602001828152602001925050506040516020818303038152906040526040518082805190602001908083835b6020831061114b5780518252602082019150602081019050602083039250611128565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa15801561118d573d6000803e3d6000fd5b5050506040513d60208110156111a257600080fd5b810190808051906020019092919050505092505b600282816111c057fe5b0491508080600101915050610ff2565b506002826111df602054611314565b600060401b6040516020018084815260200183805190602001908083835b6020831061122057805182526020820191506020810190506020830392506111fd565b6001836020036101000a0380198251168184511680821785525050505050509050018267ffffffffffffffff191667ffffffffffffffff1916815260180193505050506040516020818303038152906040526040518082805190602001908083835b602083106112a55780518252602082019150602081019050602083039250611282565b6001836020036101000a038019825116818451168082178552505050505050905001915050602060405180830381855afa1580156112e7573d6000803e3d6000fd5b5050506040513d60208110156112fc57600080fd5b81019080805190602001909291905050509250505090565b6060600867ffffffffffffffff8111801561132e57600080fd5b506040519080825280601f01601f1916602001820160405280156113615781602001600182028036833780820191505090505b50905060008260c01b90508060076008811061137957fe5b1a60f81b8260008151811061138a57fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350806006600881106113c657fe5b1a60f81b826001815181106113d757fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053508060056008811061141357fe5b1a60f81b8260028151811061142457fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053508060046008811061146057fe5b1a60f81b8260038151811061147157fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350806003600881106114ad57fe5b1a60f81b826004815181106114be57fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350806002600881106114fa57fe5b1a60f81b8260058151811061150b57fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053508060016008811061154757fe5b1a60f81b8260068151811061155857fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053508060006008811061159457fe5b1a60f81b826007815181106115a557fe5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535050919050565b600080858511156115ea57600080fd5b838611156115f757600080fd5b600185028301915084860390509450949250505056fe4465706f736974436f6e74726163743a206d65726b6c6520747265652066756c6c4465706f736974436f6e74726163743a207265636f6e7374727563746564204465706f7369744461746120646f6573206e6f74206d6174636820737570706c696564206465706f7369745f646174615f726f6f744465706f736974436f6e74726163743a20696e76616c6964207769746864726177616c5f63726564656e7469616c73206c656e6774684465706f736974436f6e74726163743a206465706f7369742076616c7565206e6f74206d756c7469706c65206f6620677765694465706f736974436f6e74726163743a20696e76616c6964207075626b6579206c656e6774684465706f736974436f6e74726163743a206465706f7369742076616c756520746f6f20686967684465706f736974436f6e74726163743a206465706f7369742076616c756520746f6f206c6f774465706f736974436f6e74726163743a20696e76616c6964207369676e6174757265206c656e677468a2646970667358221220230afd4b6e3551329e50f1239e08fa3ab7907b77403c4f237d9adf679e8e43cf64736f6c634300060b0033",
    			"balance": "0x0"
    		},
    		"4e59b44847b379578588920ca78fbf26c0b4956c": {
    			"code": "0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe03601600081602082378035828234f58015156039578182fd5b8082525050506014600cf3",
    			"balance": "0x0"
    		},
    		"5678e9e827b3be0e3d4b910126a64a697a148267": {
    			"balance": "0x43c33c1937564800000"
    		},
    		"70997970c51812dc3a010c7d01b50e0d17dc79c8": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"71be63f3384f5fb98995898a86b02fb2426c5788": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"8626f6940e2eb28930efb4cef49b2d1f2c9c1199": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"90f79bf6eb2c4f870365e785982e1f101e93b906": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"976ea74026e726554db657fa54763abd0c3a0aa9": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"9965507d1a55bcc2695c58ba16fb37d819b0a4dc": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"a0ee7a142d267c1f36714e4a8f75612f20a79720": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"bcd4042de499d14e55001ccbb24a551f3b954096": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"bda5747bfd65f08deb54cb465eb87d40e51b197e": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"cd3b766ccdd6ae721141f452c550ca635964ce71": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"dd2fd4581271e230360230f9337d5c0430bf44c0": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"df3e18d64bc6a983f673ab319ccae4f1a57c7097": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"f39fd6e51aad88f6f4ce6ab8827279cfffb92266": {
    			"balance": "0x21e19e0c9bab2400000"
    		},
    		"fabb0ac9d68b0b445fb7357272ff202c5651694a": {
    			"balance": "0x21e19e0c9bab2400000"
    		}
    	},
    	"number": "0x0",
    	"gasUsed": "0x0",
    	"parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
    	"baseFeePerGas": null,
    	"excessBlobGas": null,
    	"blobGasUsed": null
    }
  geth_password.txt: |
    
  init-script.sh: |
    #!/bin/sh
    
    echo "running script init-config"
    
    echo "HOSTNAME: $HOSTNAME"
    echo "Fresh init requested. Removing existing data directories and StateFiles"
    rm -rf /data/geth/$HOSTNAME
    echo "Removed /data/geth/$HOSTNAME"
    rm -rf /data/stateFiles
    echo "Removed /data/stateFiles"
    
    rm -rf /data/stateFiles
    mkdir -p /data/stateFiles
    
    cp /config/geth_password.txt /data/geth/.
    mkdir -p /data/geth/$HOSTNAME/keystore
    
    ls -lrt /data/geth/$HOSTNAME/keystore
    
    cp /config/UTC* /data/geth/$HOSTNAME/keystore/.
    cat /data/geth/$HOSTNAME/keystore/UTC*
    
    # Create the genesis state only if it doesn't already exist
    #if [ ! -f /data/stateFiles/genesis.ssz ]; then
      echo "Genesis state files not found. Creating..."
    
      # Run prysmctl to generate the genesis state
      /usr/local/bin/prysmctl testnet \
          generate-genesis \
          --fork=deneb \
          --num-validators=64 \
          --output-ssz=/data/stateFiles/genesis.ssz \
          --chain-config-file=/config/config.yml \
          --geth-genesis-json-in=/config/genesis.json \
          --geth-genesis-json-out=/data/stateFiles/genesis.json
    
      echo "Genesis state files created successfully."
      # "If you have to manually edit the genesis file after creation , this can happen when trying new forks see previous commits on installing jq and doing this"
      echo "Initializing Geth with the updated genesis..."
      geth init --datadir /data/geth/$HOSTNAME /data/stateFiles/genesis.json
    
      echo "Geth initialized successfully with Deneb active."
    
    #else
    #  echo "Genesis state files already exist. Skipping creation."
    #fi
    
    
  init-script-bootnode.sh: |
    #!/bin/sh
    
    # Step 1: Define the URL for the bootnode binary
    echo "Downloading bootnode binary..."
    BOOTNODE_URL="https://gethstore.blob.core.windows.net/builds/geth-alltools-linux-amd64-1.14.12-293a300d.tar.gz"
    
    NODEKEY_PATH="/data/network/$HOSTNAME/nodekey"
    ENODE_URL_PATH="/data/network/$HOSTNAME/enode.url"
    
    rm -rf /data/scripts/$HOSTNAME
    mkdir -p /data/scripts/$HOSTNAME
    
    echo "HOSTNAME: $HOSTNAME"
    
    rm -rf /data/network/$HOSTNAME
    echo "Removed /data/network/$HOSTNAME"
    mkdir -p /data/network/$HOSTNAME
    echo "Created /data/network/$HOSTNAME"
    mkdir -p /data/stateFiles
    echo "Created /data/stateFiles"
    
    ls -lrt /data
    
    # Step 2: Download the bootnode binary
    curl -L $BOOTNODE_URL -o /tmp/geth-tools.tar.gz
    
    # Step 3: Extract the bootnode binary
    echo "Extracting bootnode binary..."
    tar -xvzf /tmp/geth-tools.tar.gz -C /tmp
    
    ls -lrt /tmp
    
    chmod +x /tmp/geth-alltools-linux-amd64-1.14.12-293a300d/bootnode
    ls -lrt /tmp/geth-alltools-linux-amd64-1.14.12-293a300d/bootnode
    
    # Step 5: Generate the nodekey if it doesn't exist
    
    if [ ! -f "$NODEKEY_PATH" ]; then
      echo "Generating new nodekey..."
      /tmp/geth-alltools-linux-amd64-1.14.12-293a300d/bootnode -genkey "$NODEKEY_PATH"
      echo "New nodekey generated at $NODEKEY_PATH."
      ls -lrt $NODEKEY_PATH
    fi
    
    cp /tmp/geth-alltools-linux-amd64-1.14.12-293a300d/bootnode /data/scripts/$HOSTNAME/bootnode
    chmod +x /data/scripts/$HOSTNAME/bootnode
    
    ls -lrt /data/scripts/$HOSTNAME/bootnode
    
    echo "Starting bootnode on port 30303..."
    
    # Check if prysmctl is executable
    ls -lrt /usr/local/bin/prysmctl
    
    echo "Creating the genesis state using the provided genesis.json and config.yml..."
    
    GENESIS_TIME=${GENESIS_TIME:-1736642736}
    
    # Run prysmctl to generate the genesis state
    /usr/local/bin/prysmctl testnet generate-genesis \
      --num-validators=1 \
      --chain-config-file=/config/config.yml \
      --geth-genesis-json-in=/config/genesis.json \
      --output-ssz=/data/stateFiles/genesis.ssz \
      --geth-genesis-json-out=/data/stateFiles/genesis-out.json \
      --genesis-time="$GENESIS_TIME"
    
    geth init --datadir "/data/network/${HOSTNAME}" /data/stateFiles/genesis-out.json
    
    # Get the pod's IP
    POD_IP=$(hostname -i)
    
    geth --datadir "/data/network/${HOSTNAME}" \
      --nodekey "${NODEKEY_PATH}" \
      --networkid 999999 \
      --nat "extip:${POD_IP}" \
      --port 30303 \
      --verbosity 3 \
      --ipcpath /tmp/geth.ipc \
      --http \
      --http.addr=0.0.0.0 \
      --http.port=8545 \
      --http.vhosts=* \
      --http.corsdomain=* \
    
  UTC--2022-08-19T17-38-31.257380510Z--123463a4b065722e99115d6c222f267d9cabb524: |
    {"address":"123463a4b065722e99115d6c222f267d9cabb524","crypto":{"cipher":"aes-128-ctr","ciphertext":"93b90389b855889b9f91c89fd15b9bd2ae95b06fe8e2314009fc88859fc6fde9","cipherparams":{"iv":"9dc2eff7967505f0e6a40264d1511742"},"kdf":"scrypt","kdfparams":{"dklen":32,"n":262144,"p":1,"r":8,"salt":"c07503bb1b66083c37527cd8f06f8c7c1443d4c724767f625743bd47ae6179a4"},"mac":"6d359be5d6c432d5bbb859484009a4bf1bd71b76e89420c380bd0593ce25a817"},"id":"622df904-0bb1-4236-b254-f1b8dfdff1ec","version":3}
---
# Source: geth/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: jx-staging-geth-node
  labels:
    helm.sh/chart: geth-1.0.8
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
    app.kubernetes.io/managed-by: Helm
rules:
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - get
  - list
  - watch
---
# Source: geth/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: jx-staging-geth-node
  labels:
    helm.sh/chart: geth-1.0.8
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: jx-staging-geth-node
subjects:
  - kind: ServiceAccount
    name: geth-node
    namespace: jx-staging
---
# Source: geth/templates/role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: geth-node
  labels:
    helm.sh/chart: geth-1.0.8
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
    app.kubernetes.io/managed-by: Helm
rules:
- apiGroups:
  - ""
  resources:
  - services
  verbs:
  - get
  - list
  - watch
---
# Source: geth/templates/rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: geth-node
  labels:
    helm.sh/chart: geth-1.0.8
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: geth-node
subjects:
  - kind: ServiceAccount
    name: geth-node
---
# Source: geth/templates/service-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: geth-node-headless
  labels:
    helm.sh/chart: geth-1.0.8
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
    app.kubernetes.io/managed-by: Helm
spec:
  clusterIP: None
  ports:
    - port: 30303
      targetPort: p2p-tcp
      protocol: TCP
      name: p2p-tcp
    - port: 30303
      targetPort: p2p-udp
      protocol: UDP
      name: p2p-udp
    - port: 8545
      targetPort: http-rpc
      protocol: TCP
      name: http-rpc  
    - port: 8546
      targetPort: ws-rpc
      protocol: TCP
      name: ws-rpc
    - port: 8551
      targetPort: auth-rpc
      protocol: TCP
      name: auth-rpc
    - port: 6060
      targetPort: metrics
      protocol: TCP
      name: metrics
  selector:
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
---
# Source: geth/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: geth-node
  labels:
    helm.sh/chart: geth-1.0.8
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 30303
      targetPort: p2p-tcp
      protocol: TCP
      name: p2p-tcp
    - port: 30303
      targetPort: p2p-udp
      protocol: UDP
      name: p2p-udp
    - port: 8545
      targetPort: http-rpc
      protocol: TCP
      name: http-rpc  
    - port: 8546
      targetPort: ws-rpc
      protocol: TCP
      name: ws-rpc
    - port: 8551
      targetPort: auth-rpc
      protocol: TCP
      name: auth-rpc
    - port: 6060
      targetPort: metrics
      protocol: TCP
      name: metrics
  selector:
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
---
# Source: geth/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: geth-node
  labels:
    helm.sh/chart: geth-1.0.8
    app.kubernetes.io/name: geth
    app.kubernetes.io/instance: geth-node
    app.kubernetes.io/managed-by: Helm
  annotations:
    {}
spec:
  podManagementPolicy: OrderedReady
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: geth
      app.kubernetes.io/instance: geth-node
  serviceName: geth-node-headless
  updateStrategy:
    type: RollingUpdate
  template:
    metadata:
      labels:
        app.kubernetes.io/name: geth
        app.kubernetes.io/instance: geth-node
      annotations:
        checksum/config: 7d8054bd124e133065eda995921a6077bcb6228110b6a0a4db9797539025604b
        checksum/secrets: 68b694d9e785dad7830aa22bd5c65a94d8c6e5adc7e3c04c1f5ccad7c1247dda
    spec:
      serviceAccountName: geth-node
      securityContext:
        fsGroup: 10001
        runAsGroup: 10001
        runAsNonRoot: true
        runAsUser: 10001
      initContainers:
        - name: init-chown-data
          image: "jx3mqubebuild.azurecr.io/mqube-geth:0.0.13"
          imagePullPolicy: IfNotPresent
          securityContext:
            runAsNonRoot: false
            runAsUser: 0
          command: 
            - sh
            - -c
            - |
              cp /config/init-script.sh /tmp/init-script.sh
              chmod +x /tmp/init-script.sh
              /tmp/init-script.sh
          resources:
      
            {}
          volumeMounts:
            - name: storage
              mountPath: "/data"
            - name: config
              mountPath: "/config"
      containers:
        - name: geth
          image: "docker.io/ethereum/client-go:v1.14.11"
          imagePullPolicy: IfNotPresent
          command:
            - sh
            - -ac
            - >
              exec geth
              --datadir=/data/geth/$HOSTNAME
              --authrpc.jwtsecret=/data/jwt.hex
              --http
              --http.addr=0.0.0.0
              --http.api=admin,debug,engine,eth,miner,net,rpc,txpool,web3
              --http.corsdomain=*
              --http.port=8545
              --http.vhosts=*
              --ws
              --ws.api=admin,debug,engine,eth,miner,net,rpc,txpool,web3
              --ws.addr=0.0.0.0
              --ws.port=8546
              --ws.origins=*
              --authrpc.vhosts=*
              --authrpc.addr=0.0.0.0
              --authrpc.port=8551
              --allow-insecure-unlock
              --unlock=0x123463a4b065722e99115d6c222f267d9cabb524
              --password=/data/geth/geth_password.txt
              --nodiscover
              --syncmode=full
              --metrics
              --metrics.addr=geth
              --metrics.port=6060
              --metrics.expensive
              --networkid=999999
              --verbosity=3
              --ipcpath=/tmp/geth.ipc
            
          securityContext:
            {}
          volumeMounts:
            - name: storage
              mountPath: "/data"
            - name: jwt
              mountPath: "/data/jwt.hex"
              subPath: jwt.hex
              readOnly: true
            - name: config
              mountPath: "/config"
              readOnly: true
          ports:
            - name: p2p-tcp
              containerPort: 30303
              protocol: TCP
            - name: p2p-udp
              containerPort: 30303
              protocol: UDP
            - name: http-rpc
              containerPort: 8545
              protocol: TCP
            - name: ws-rpc
              containerPort: 8546
              protocol: TCP
            - name: auth-rpc
              containerPort: 8551
              protocol: TCP
            - name: metrics
              containerPort: 6060
              protocol: TCP
          livenessProbe:
            initialDelaySeconds: 60
            periodSeconds: 120
            tcpSocket:
              port: http-rpc
          readinessProbe:
            initialDelaySeconds: 10
            periodSeconds: 10
            tcpSocket:
              port: http-rpc
          resources:
            {}
          env:
            - name: POD_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
        
        - command:
          - /bin/sh
          - -c
          - while true; do sleep 30; done
          image: jx3mqubebuild.azurecr.io/mqube-geth:v0.0.13
          name: debug-node
          resources:
            limits:
              cpu: 100m
              memory: 128Mi
            requests:
              cpu: 100m
              memory: 128Mi
      nodeSelector:
        {}
      affinity:
        {}
      tolerations:
        []
      topologySpreadConstraints:
        []
      terminationGracePeriodSeconds: 300
      volumes:
        - name: jwt
          secret:
            secretName: geth-node-jwt
        - name: config
          configMap:
            name: geth-node
  volumeClaimTemplates:
  - metadata:
      name: storage
      annotations:
        {}
    spec:
      accessModes:
        - ReadWriteMany
      resources:
        requests:
          storage: "20Gi"
      storageClassName: azurefile

